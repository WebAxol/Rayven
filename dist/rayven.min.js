/*! For license information please see rayven.min.js.LICENSE.txt */
var __webpack_modules__={"./lib/config.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   rayvenConfig: () => (/* binding */ rayvenConfig)\n/* harmony export */ });\nvar rayvenConfig = {\n    resolution: 600,\n    shaders: {\n        vertexShader: "./shaders/rect.vert",\n        frontFragmentShader: "./shaders/front.frag",\n        lyingFragmentShader: "./shaders/lying.frag"\n    }\n};\n//# sourceMappingURL=config.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/config.js?')},"./lib/proto/Circle.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   circlePrototype: () => (/* binding */ circlePrototype)\n/* harmony export */ });\n/* harmony import */ var _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n\n;\nconst circlePrototype = {\n    name: "Circle",\n    attributes: {\n        center: new _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](0, 0),\n        radius: 1,\n        color: \'255,0,0\',\n        opacity: 1\n    },\n    collections: new Set(["Circles"])\n};\n\n//# sourceMappingURL=Circle.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/proto/Circle.js?')},"./lib/proto/HorizontalWall.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   horizontalWallPrototype: () => (/* binding */ horizontalWallPrototype)\n/* harmony export */ });\nconst horizontalWallPrototype = {\n    name: "HorizontalWall",\n    attributes: {\n        color: \'white\',\n        startX: NaN,\n        endX: NaN,\n        posY: NaN,\n        opacity: 1\n    },\n    collections: new Set(["HorizontalWalls"])\n};\n\n//# sourceMappingURL=HorizontalWall.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/proto/HorizontalWall.js?')},"./lib/proto/Ray.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   rayPrototype: () => (/* binding */ rayPrototype)\n/* harmony export */ });\n/* harmony import */ var _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n\n;\nconst rayPrototype = {\n    name: "Ray",\n    attributes: {\n        active: true,\n        lambda: NaN,\n        source: new _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](NaN, NaN),\n        direction: new _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](NaN, NaN),\n        reflected: undefined,\n        level: 1,\n        collidesWith: undefined,\n        collidesAt: (new _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](NaN, NaN))\n    }\n};\n\n//# sourceMappingURL=Ray.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/proto/Ray.js?')},"./lib/proto/VerticalWall.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   verticalWallPrototype: () => (/* binding */ verticalWallPrototype)\n/* harmony export */ });\nconst verticalWallPrototype = {\n    name: "VerticalWall",\n    attributes: {\n        color: \'white\',\n        startY: NaN,\n        endY: NaN,\n        posX: NaN,\n        opacity: 1\n    },\n    collections: new Set(["VerticalWalls"])\n};\n\n//# sourceMappingURL=VerticalWall.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/proto/VerticalWall.js?')},"./lib/rayven.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   collections: () => (/* reexport safe */ _setup_collections_js__WEBPACK_IMPORTED_MODULE_1__.collections),\n/* harmony export */   prototypes: () => (/* reexport safe */ _setup_prototypes_js__WEBPACK_IMPORTED_MODULE_0__.prototypes),\n/* harmony export */   rayven: () => (/* binding */ rayven),\n/* harmony export */   systems: () => (/* reexport safe */ _setup_systems_js__WEBPACK_IMPORTED_MODULE_2__.systems)\n/* harmony export */ });\n/* harmony import */ var _setup_prototypes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setup/prototypes.js */ "./lib/setup/prototypes.js");\n/* harmony import */ var _setup_collections_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./setup/collections.js */ "./lib/setup/collections.js");\n/* harmony import */ var _setup_systems_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./setup/systems.js */ "./lib/setup/systems.js");\n\n\n\nconst rayven = {\n    name: "rayven",\n    prototypes: _setup_prototypes_js__WEBPACK_IMPORTED_MODULE_0__.prototypes,\n    collections: _setup_collections_js__WEBPACK_IMPORTED_MODULE_1__.collections,\n    systems: _setup_systems_js__WEBPACK_IMPORTED_MODULE_2__.systems\n};\n\n//# sourceMappingURL=rayven.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/rayven.js?')},"./lib/setup/canvases.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_rendering_CanvasManager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/rendering/CanvasManager.js */ \"./lib/utils/rendering/CanvasManager.js\");\n\n;\nconst canvases = {\n    canvas3d: _utils_rendering_CanvasManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createCanvas({\n        id: 'canvas3d',\n        width: 300 * 4 * 1,\n        height: 170 * 4 * 1,\n        style: {\n            width: '100%',\n            zIndex: 2,\n            background: \"black\",\n            'image-rendering': 'pixelated',\n        }\n    }),\n    background: _utils_rendering_CanvasManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createCanvas({\n        id: 'background',\n        width: 3000 / 4,\n        height: 1700 / 4,\n        style: {\n            zIndex: 1,\n            width: '100%',\n        }\n    }),\n    canvas2d: _utils_rendering_CanvasManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createCanvas({\n        id: 'canvas2d',\n        width: 100,\n        height: 100,\n        style: {\n            zIndex: 3,\n            position: 'absolute',\n            borderRadius: '50%',\n            top: '5px',\n            right: '5px',\n            width: '20%',\n            height: 'auto',\n            opacity: '0.7',\n            'image-rendering': 'pixelated'\n        }\n    })\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (canvases);\n//# sourceMappingURL=canvases.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/setup/canvases.js?")},"./lib/setup/collections.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Circles: () => (/* binding */ Circles),\n/* harmony export */   HorizontalWalls: () => (/* binding */ HorizontalWalls),\n/* harmony export */   VerticalWalls: () => (/* binding */ VerticalWalls),\n/* harmony export */   collections: () => (/* binding */ collections)\n/* harmony export */ });\n/* harmony import */ var _kernox_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../kernox.js */ "./vendor/kernox.js");\n\nclass HorizontalWalls extends _kernox_js__WEBPACK_IMPORTED_MODULE_0__.ArrayList {\n}\n;\nclass VerticalWalls extends _kernox_js__WEBPACK_IMPORTED_MODULE_0__.ArrayList {\n}\n;\nclass Circles extends _kernox_js__WEBPACK_IMPORTED_MODULE_0__.ArrayList {\n}\n;\nconst collections = [\n    HorizontalWalls,\n    VerticalWalls,\n    Circles\n];\n//# sourceMappingURL=collections.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/setup/collections.js?')},"./lib/setup/images.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_rendering_ImageLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/rendering/ImageLoader.js */ \"./lib/utils/rendering/ImageLoader.js\");\n\nconst loader = new _utils_rendering_ImageLoader_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\nloader.load('bricks', 'floor.webp');\nloader.load('sky', 'land.webp');\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (loader);\n//# sourceMappingURL=images.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/setup/images.js?")},"./lib/setup/prototypes.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prototypes: () => (/* binding */ prototypes)\n/* harmony export */ });\n/* harmony import */ var _proto_HorizontalWall_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../proto/HorizontalWall.js */ "./lib/proto/HorizontalWall.js");\n/* harmony import */ var _proto_VerticalWall_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../proto/VerticalWall.js */ "./lib/proto/VerticalWall.js");\n/* harmony import */ var _proto_Ray_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../proto/Ray.js */ "./lib/proto/Ray.js");\n/* harmony import */ var _proto_Circle_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../proto/Circle.js */ "./lib/proto/Circle.js");\n\n\n\n\nconst prototypes = [\n    _proto_HorizontalWall_js__WEBPACK_IMPORTED_MODULE_0__.horizontalWallPrototype,\n    _proto_VerticalWall_js__WEBPACK_IMPORTED_MODULE_1__.verticalWallPrototype,\n    _proto_Circle_js__WEBPACK_IMPORTED_MODULE_3__.circlePrototype,\n    _proto_Ray_js__WEBPACK_IMPORTED_MODULE_2__.rayPrototype,\n];\n//# sourceMappingURL=prototypes.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/setup/prototypes.js?')},"./lib/setup/systems.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   systems: () => (/* binding */ systems)\n/* harmony export */ });\n/* harmony import */ var _systems_Camera_CameraMover_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../systems/Camera/CameraMover.js */ "./lib/systems/Camera/CameraMover.js");\n/* harmony import */ var _systems_Camera_InputHandler_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../systems/Camera/InputHandler.js */ "./lib/systems/Camera/InputHandler.js");\n/* harmony import */ var _systems_SceneRendering_Orchestrator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../systems/SceneRendering/Orchestrator.js */ "./lib/systems/SceneRendering/Orchestrator.js");\n/* harmony import */ var _systems_2DRendering_SceneRenderer2D_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../systems/2DRendering/SceneRenderer2D.js */ "./lib/systems/2DRendering/SceneRenderer2D.js");\n\n\n\n\nconst systems = [\n    _systems_2DRendering_SceneRenderer2D_js__WEBPACK_IMPORTED_MODULE_3__["default"],\n    _systems_SceneRendering_Orchestrator_js__WEBPACK_IMPORTED_MODULE_2__["default"],\n    _systems_Camera_CameraMover_js__WEBPACK_IMPORTED_MODULE_0__["default"],\n    _systems_Camera_InputHandler_js__WEBPACK_IMPORTED_MODULE_1__["default"]\n];\n//# sourceMappingURL=systems.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/setup/systems.js?')},"./lib/setup/webGL.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   gl: () => (/* binding */ gl),\n/* harmony export */   locatorPromise: () => (/* binding */ locatorPromise)\n/* harmony export */ });\n/* harmony import */ var _utils_rendering_LocatorGL_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/rendering/LocatorGL.js */ "./lib/utils/rendering/LocatorGL.js");\n/* harmony import */ var _utils_rendering_BuilderGL_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/rendering/BuilderGL.js */ "./lib/utils/rendering/BuilderGL.js");\n/* harmony import */ var _canvases_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./canvases.js */ "./lib/setup/canvases.js");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config.js */ "./lib/config.js");\n/* harmony import */ var _images_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./images.js */ "./lib/setup/images.js");\n\n\n\n\n\nconst canvas = _canvases_js__WEBPACK_IMPORTED_MODULE_2__["default"].canvas3d;\nconst gl = canvas.getContext("webgl2");\nconst locatorPromise = new Promise(async (resolve, reject) => {\n    if (!gl)\n        return reject("Failed to get rendering context");\n    const _locator = new _utils_rendering_LocatorGL_js__WEBPACK_IMPORTED_MODULE_0__["default"]();\n    console.log("%cPreparing WebGL...", "color: skyblue");\n    console.log(\'\\x1b[36m\', "building shaders...");\n    const rectangleVertexShader = await _utils_rendering_BuilderGL_js__WEBPACK_IMPORTED_MODULE_1__["default"].buildShader(gl, "VERTEX_SHADER", _config_js__WEBPACK_IMPORTED_MODULE_3__.rayvenConfig.shaders.vertexShader);\n    const frontFragmentShader = await _utils_rendering_BuilderGL_js__WEBPACK_IMPORTED_MODULE_1__["default"].buildShader(gl, "FRAGMENT_SHADER", _config_js__WEBPACK_IMPORTED_MODULE_3__.rayvenConfig.shaders.frontFragmentShader);\n    const lyingFragmentShader = await _utils_rendering_BuilderGL_js__WEBPACK_IMPORTED_MODULE_1__["default"].buildShader(gl, "FRAGMENT_SHADER", _config_js__WEBPACK_IMPORTED_MODULE_3__.rayvenConfig.shaders.lyingFragmentShader);\n    console.log("\\n\\n");\n    console.log("%c[WebGL DEBUG]: shaders\' status", "color : skyblue");\n    console.table({\n        rectangleVertexShader,\n        frontFragmentShader,\n        lyingFragmentShader\n    });\n    if (!rectangleVertexShader || !frontFragmentShader || !lyingFragmentShader) {\n        return reject("There was an error at building shaders");\n    }\n    console.log(\'\\x1b[36m\', "building programs...");\n    const frontProgram = _utils_rendering_BuilderGL_js__WEBPACK_IMPORTED_MODULE_1__["default"].buildProgram(gl, rectangleVertexShader, frontFragmentShader);\n    const lyingProgram = _utils_rendering_BuilderGL_js__WEBPACK_IMPORTED_MODULE_1__["default"].buildProgram(gl, rectangleVertexShader, lyingFragmentShader);\n    console.log("\\n\\n");\n    console.log("%c[WebGL DEBUG]: programs\' status", "color : skyblue");\n    console.table({\n        frontProgram,\n        lyingProgram\n    });\n    if (!frontProgram || !lyingProgram) {\n        return reject("There was an error at building programs");\n    }\n    console.log(\'\\x1b[36m\', "allocating programs...");\n    _locator.registerProgram("front", frontProgram);\n    _locator.registerProgram("lying", lyingProgram);\n    console.log(\'\\x1b[36m\', "creating buffers...");\n    gl.useProgram(frontProgram);\n    const frontBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, frontBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(3000 * 5 * 8), gl.DYNAMIC_DRAW);\n    const frontElementBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, frontElementBuffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(3000 * 3 * 4), gl.DYNAMIC_DRAW);\n    gl.useProgram(lyingProgram);\n    const lyingBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, lyingBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(3000 * 3 * 16), gl.DYNAMIC_DRAW);\n    const lyingElementBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, lyingElementBuffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(3000 * 3 * 8), gl.DYNAMIC_DRAW);\n    if (!frontBuffer || !frontElementBuffer || !lyingBuffer || !lyingElementBuffer) {\n        return reject("There was an error at creating buffers");\n    }\n    console.log(\'\\x1b[36m\', "allocating buffers...");\n    _locator.registerBuffer(frontBuffer, "ARRAY_BUFFER", "frontBuffer");\n    _locator.registerBuffer(frontElementBuffer, "ELEMENT_ARRAY_BUFFER", "frontBuffer");\n    _locator.registerBuffer(lyingBuffer, "ARRAY_BUFFER", "lyingBuffer");\n    _locator.registerBuffer(lyingElementBuffer, "ELEMENT_ARRAY_BUFFER", "lyingBuffer");\n    console.log("\\n\\n");\n    console.log("%cWebGL was prepared successfully!", "color: lawngreen; background:black");\n    gl.enable(gl.DEPTH_TEST);\n    gl.depthFunc(gl.ALWAYS);\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n    const floorTexture = gl.createTexture();\n    const bricks = _images_js__WEBPACK_IMPORTED_MODULE_4__["default"].get("bricks");\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, floorTexture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, bricks);\n    gl.uniform1i(gl.getUniformLocation(lyingProgram, "floorTexture"), 0);\n    const skyTexture = gl.createTexture();\n    const sky = _images_js__WEBPACK_IMPORTED_MODULE_4__["default"].get("sky");\n    gl.activeTexture(gl.TEXTURE1);\n    gl.bindTexture(gl.TEXTURE_2D, skyTexture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, sky);\n    gl.uniform1i(gl.getUniformLocation(lyingProgram, "skyTexture"), 1);\n    return resolve(_locator);\n});\n\n//# sourceMappingURL=webGL.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/setup/webGL.js?')},"./lib/systems/2DRendering/SceneRenderer2D.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _kernox_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../kernox.js */ "./vendor/kernox.js");\n/* harmony import */ var _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n/* harmony import */ var _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/scene/Camera.js */ "./lib/utils/scene/Camera.js");\n/* harmony import */ var _setup_canvases_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../setup/canvases.js */ "./lib/setup/canvases.js");\n\n\n\n\nclass SceneRenderer2D extends _kernox_js__WEBPACK_IMPORTED_MODULE_0__.System {\n    constructor() {\n        super(...arguments);\n        this.scale = 1.5 * 3;\n    }\n    init() {\n        const ctx = _setup_canvases_js__WEBPACK_IMPORTED_MODULE_3__["default"].canvas2d.getContext(\'2d\');\n        if (!ctx)\n            throw Error("Failed to get 2D rendering context to render mini-map");\n        this.ctx = ctx;\n        this.horizontalWalls = this.getCollection(\'HorizontalWalls\');\n        this.verticalWalls = this.getCollection(\'VerticalWalls\');\n        this.circles = this.getCollection(\'Circles\');\n    }\n    execute() {\n        this.ctx.fillStyle = \'rgba(0,0,0,1)\';\n        this.ctx.fillRect(0, 0, 3000, 3000);\n        for (const wall of this.horizontalWalls) {\n            this.renderWall(wall);\n        }\n        for (const wall of this.verticalWalls) {\n            this.renderWall(wall);\n        }\n        for (const circle of this.circles) {\n            this.renderCircle(circle);\n        }\n    }\n    ;\n    renderWall(wall) {\n        if (!_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.castCenter)\n            return;\n        const deg = _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.castCenter?.direction.angle() * (180 / Math.PI);\n        this.ctx.strokeStyle = `rgba(${wall.color},1)`;\n        this.ctx.lineWidth = 1;\n        let from = { x: wall.startX || wall.posX, y: wall.posY || wall.startY };\n        let to = { x: wall.endX || wall.posX, y: wall.posY || wall.endY };\n        from = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].rotate(from, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.pos, deg);\n        to = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].rotate(to, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.pos, deg);\n        from = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].sub(_utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].sub(from, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.pos), { x: -10, y: -10 }).scale(this.scale);\n        to = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].sub(_utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].sub(to, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.pos), { x: -10, y: -10 }).scale(this.scale);\n        this.ctx.beginPath();\n        this.ctx.moveTo(from.x, from.y);\n        this.ctx.lineTo(to.x, to.y);\n        this.ctx.closePath();\n        this.ctx.stroke();\n    }\n    renderCircle(circle) {\n        if (!_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.castCenter)\n            return;\n        const deg = _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.castCenter?.direction.angle() * (180 / Math.PI);\n        this.ctx.strokeStyle = `rgb(${circle.color})`;\n        this.ctx.lineWidth = 1;\n        let center = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].rotate(circle.center, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.pos, deg);\n        center = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].sub(_utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].sub(center, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_2__.camera.pos), { x: -10, y: -10 }).scale(this.scale);\n        this.ctx.beginPath();\n        this.ctx.arc(center.x, center.y, circle.radius * this.scale, 0, 2 * Math.PI);\n        this.ctx.stroke();\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SceneRenderer2D);\n//# sourceMappingURL=SceneRenderer2D.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/systems/2DRendering/SceneRenderer2D.js?')},"./lib/systems/Camera/CameraMover.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _kernox_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../kernox.js */ "./vendor/kernox.js");\n/* harmony import */ var _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/scene/Camera.js */ "./lib/utils/scene/Camera.js");\n/* harmony import */ var _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n\n\n\nclass CameraMover extends _kernox_js__WEBPACK_IMPORTED_MODULE_0__.System {\n    constructor() {\n        super(...arguments);\n        this.dt = 0;\n        this.speed = 0;\n        this.commandKeyMap = {\n            w: () => { this.translateCamera(1, 0); },\n            s: () => { this.translateCamera(-1, 0); },\n            a: () => { this.translateCamera(0, 1); },\n            d: () => { this.translateCamera(0, -1); },\n            k: () => { this.rotateCamera(30 * this.dt); },\n            l: () => { this.rotateCamera(-30 * this.dt); },\n        };\n        this.control = {\n            w: false,\n            s: false,\n            d: false,\n            a: false,\n            k: false,\n            l: false\n        };\n    }\n    init() {\n        this.attachToEvent("keydown", (e) => { this.onkeydown(e); });\n        this.attachToEvent("keyup", (e) => { this.onkeyup(e); });\n    }\n    execute() {\n        this.dt = 50 / this.__kernox.fps;\n        this.speed = 0.09 * this.dt;\n        let keys = Object.keys(this.control);\n        keys.forEach((key) => {\n            if (this.control[key] === true) {\n                this.commandKeyMap[key]();\n            }\n        });\n    }\n    rotateCamera(angle = 0) {\n        if (!_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera || !_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castEdge || !_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castCenter)\n            return false;\n        const complex = [Math.cos(angle / Math.PI / 180), Math.sin(angle / Math.PI / 180)];\n        _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castCenter.direction.complexRotate(complex);\n        _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castEdge.direction.complexRotate(complex);\n    }\n    translateCamera(forward = 0, lateral = 0) {\n        if (!_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera || !_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castEdge || !_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castCenter)\n            return false;\n        const complex = [Math.cos(Math.PI / 2), Math.sin(Math.PI / 2)];\n        let frontalMovement = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__["default"].scale(_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castCenter.direction, forward);\n        let lateralMovement = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_2__["default"].complexRotate(_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castCenter.direction, complex).scale(lateral);\n        let movementDirection = frontalMovement.add(lateralMovement).normalize();\n        let displacement = movementDirection.scale(this.speed);\n        _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.pos.add(displacement);\n    }\n    onkeydown(info) {\n        if (this.control[info.key] !== undefined && this.control[info.key] !== true) {\n            this.control[info.key] = true;\n        }\n    }\n    onkeyup(info) {\n        if (this.control[info.key] !== undefined && this.control[info.key] !== false) {\n            this.control[info.key] = false;\n        }\n    }\n}\n;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CameraMover);\n//# sourceMappingURL=CameraMover.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/systems/Camera/CameraMover.js?')},"./lib/systems/Camera/InputHandler.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _kernox_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../kernox.js */ \"./vendor/kernox.js\");\n\nclass InputHandler extends _kernox_js__WEBPACK_IMPORTED_MODULE_0__.System {\n    init() {\n        window.addEventListener('keydown', (e) => { this.keydown(e); });\n        window.addEventListener('keyup', (e) => { this.keyup(e); });\n        return true;\n    }\n    keydown(e) {\n        if (!this.__kernox.paused)\n            this.dispatchEvent('keydown', { key: e.key });\n    }\n    keyup(e) {\n        if (!this.__kernox.paused)\n            this.dispatchEvent('keyup', { key: e.key });\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (InputHandler);\n//# sourceMappingURL=InputHandler.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/systems/Camera/InputHandler.js?")},"./lib/systems/SceneRendering/DataModeller.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config.js */ "./lib/config.js");\n/* harmony import */ var _setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../setup/webGL.js */ "./lib/setup/webGL.js");\n/* harmony import */ var _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/scene/Camera.js */ "./lib/utils/scene/Camera.js");\n\n\n\n\nclass DataModeller {\n    constructor(sys) {\n        this.sys = sys;\n        this.memoryIndex = 0;\n        this.initialized = false;\n        const head = {};\n        const n = 14;\n        var node = head;\n        for (let i = 0; i <= n; i++) {\n            node.itemID = -1;\n            node.color = [NaN, NaN];\n            node.x = [NaN, NaN];\n            node.y = [NaN, NaN];\n            node.z = [NaN, NaN];\n            node.t = [NaN, NaN];\n            node.l = [1, 1];\n            node.child = undefined;\n            node.stripped = false;\n            if (i == n)\n                continue;\n            node.child = {};\n            node = node.child;\n        }\n        this.cache = head;\n    }\n    init() {\n        const locator = this.sys.locator;\n        this.frontBuffer = locator.getBuffer("ARRAY_BUFFER", "frontBuffer");\n        this.frontElementBuffer = locator.getBuffer("ELEMENT_ARRAY_BUFFER", "frontBuffer");\n        this.lyingBuffer = locator.getBuffer("ARRAY_BUFFER", "lyingBuffer");\n        this.lyingElementBuffer = locator.getBuffer("ELEMENT_ARRAY_BUFFER", "lyingBuffer");\n        this.initialized = true;\n    }\n    reset() {\n        this.memoryIndex = 0;\n        var cache = this.cache;\n        while (cache) {\n            cache.itemID = -1;\n            cache.stripped = true;\n            cache = cache.child;\n        }\n    }\n    mapTexture(collidesAt, item) {\n        if (collidesAt == null)\n            return 0;\n        if (item.type == "Circle")\n            return this.mapCylindricalTexture(collidesAt, item);\n        return this.mapLinearTexture(collidesAt, item);\n    }\n    mapLinearTexture(collidesAt, wall) {\n        let percentage = 0;\n        if (wall.type === \'HorizontalWall\') {\n            let wallLength = wall.endX - wall.startX;\n            percentage = Math.abs(((collidesAt.x - wall.startX)));\n        }\n        else if (wall.type === \'VerticalWall\') {\n            let wallLength = wall.endY - wall.startY;\n            percentage = Math.abs((collidesAt.y - wall.startY));\n        }\n        return percentage;\n    }\n    mapCylindricalTexture(collidesAt, cyl) {\n        let _angle = Math.ceil(this.sys.__kernox.frame / 1) / 50;\n        const direction = new _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](Math.cos(_angle), Math.sin(_angle));\n        const centerToPoint = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].sub(collidesAt, cyl.center);\n        const angle = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].angleBetween(centerToPoint, direction);\n        return angle / (Math.PI / (cyl.radius * 2));\n    }\n    model(ray, angle, index) {\n        if (!this.initialized)\n            this.init();\n        const znear = 1 / Math.tan(_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_3__.camera.FOV * Math.PI / 360);\n        const deltaAngle = (_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_3__.camera.FOV / _config_js__WEBPACK_IMPORTED_MODULE_1__.rayvenConfig.resolution) * (Math.PI / 180) * -1;\n        var cache = this.cache;\n        var itemID = -1;\n        var depth = 0;\n        var currentX, currentY, currentT, currentL = 1;\n        var currentColor;\n        var lyingSurf = [];\n        var frontSurf = [];\n        var lyingElement = [];\n        var frontElement = [];\n        var cut = false, stripped = false;\n        var level = -1;\n        while (cache) {\n            itemID = -1;\n            if (ray && ray.collidesWith) {\n                itemID = ray.collidesWith.id;\n                stripped = ray.collidesWith.type == "Circle";\n                depth += ray.lambda * Math.cos(Math.abs(angle));\n                currentY = 0.01 + znear / depth;\n                currentX = Math.tan(angle - deltaAngle) * znear * ((index <= _config_js__WEBPACK_IMPORTED_MODULE_1__.rayvenConfig.resolution / 2) ? -1 : 1);\n                currentT = this.mapTexture(ray.collidesAt, ray.collidesWith);\n                currentColor = (ray.collidesWith ? ray.collidesWith.color + `,${ray.collidesWith.opacity}` : "0,0,0,1")\n                    .split(\',\')\n                    .map((component, i) => { return i < 3 ? parseFloat(component) / 255 : parseFloat(component); });\n            }\n            cut = cache.itemID >= 0 && (cut || (cache.itemID !== itemID || index === _config_js__WEBPACK_IMPORTED_MODULE_1__.rayvenConfig.resolution - 1 || cache.stripped));\n            if (cut) {\n                this.memoryIndex++;\n                level++;\n                let { x, y, z, t, l } = cache;\n                frontSurf = [\n                    x[0] * z[0], y[0] * z[0], z[0], ...cache.color[0], t[0], 0,\n                    x[1] * z[1], y[1] * z[1], z[1], ...cache.color[1], t[1], 0,\n                    x[1] * z[1], -y[1] * z[1], z[1], ...cache.color[1], t[1], 1,\n                    x[0] * z[0], -y[0] * z[0], z[0], ...cache.color[0], t[0], 1,\n                ]\n                    .concat(frontSurf);\n                frontElement = ([\n                    0, 1, 2,\n                    0, 3, 2,\n                ]\n                    .map((i) => { return i + (this.memoryIndex - level) * 4; })).concat(frontElement.map((i) => { return i + 4; }));\n                const fix = y[0] > 1 && y[1] < 1 ? 1 : 0;\n                lyingSurf = [\n                    x[0] * z[0], l[0] * z[0], z[0], 1,\n                    x[1] * z[1], l[1] * z[1], z[1], 1,\n                    x[1] * z[0], y[1] * z[0], z[0], 1,\n                    x[0] * z[1], y[0] * z[1], z[1], 1,\n                    x[0] * z[0], -l[0] * z[0], z[0], -1,\n                    x[1] * z[1], -l[1] * z[1], z[1], -1,\n                    x[1] * z[1], -y[1] * z[1], z[1], -1,\n                    x[0] * z[0], -y[0] * z[0], z[0], -1,\n                ]\n                    .concat(lyingSurf);\n                lyingElement = [\n                    0, 1, 2 + fix,\n                    0 + fix, 2, 3,\n                    4, 5, 6 + fix,\n                    4 + fix, 6, 7\n                ]\n                    .map((i) => { return i + (this.memoryIndex - level) * 8; })\n                    .concat(lyingElement.map((i) => { return i + 8; }));\n                cache.itemID = itemID;\n                cache.color[0] = currentColor;\n                cache.x[0] = x[1];\n                cache.y[0] = currentY;\n                cache.l[0] = currentL;\n                cache.z[0] = depth;\n                cache.t[0] = currentT;\n                cache.stripped = stripped;\n            }\n            if (cache.itemID < 0 && ray) {\n                cache.itemID = itemID;\n                cache.color[0] = currentColor;\n                cache.color[1] = currentColor;\n                cache.x[0] = currentX;\n                cache.y[0] = currentY;\n                cache.t[0] = currentT;\n                cache.l[0] = currentL;\n            }\n            cache.color[1] = currentColor;\n            cache.x[1] = currentX;\n            cache.y[1] = currentY;\n            cache.t[1] = currentT;\n            cache.l[1] = currentL;\n            cache.z[1] = depth;\n            ray = (ray && ray.reflected && ray.reflected.active) ? ray.reflected : null;\n            currentL = currentY;\n            cache = cache.child;\n        }\n        if (!frontSurf.length)\n            return;\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__.gl.bindBuffer(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__.gl.ARRAY_BUFFER, this.frontBuffer);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__.gl.bufferSubData(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__.gl.ARRAY_BUFFER, (this.memoryIndex - level) * 9 * 4 * Float32Array.BYTES_PER_ELEMENT, new Float32Array(frontSurf));\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__.gl.bindBuffer(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__.gl.ELEMENT_ARRAY_BUFFER, this.frontElementBuffer);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__.gl.bufferSubData(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__.gl.ELEMENT_ARRAY_BUFFER, (this.memoryIndex - level) * 6 * Uint16Array.BYTES_PER_ELEMENT, new Uint16Array(frontElement));\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__.gl.bindBuffer(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__.gl.ARRAY_BUFFER, this.lyingBuffer);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__.gl.bufferSubData(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__.gl.ARRAY_BUFFER, (this.memoryIndex - level) * 8 * 4 * Float32Array.BYTES_PER_ELEMENT, new Float32Array(lyingSurf));\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__.gl.bindBuffer(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__.gl.ELEMENT_ARRAY_BUFFER, this.lyingElementBuffer);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__.gl.bufferSubData(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_2__.gl.ELEMENT_ARRAY_BUFFER, (this.memoryIndex - level) * 12 * Uint16Array.BYTES_PER_ELEMENT, new Uint16Array(lyingElement));\n    }\n}\n;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DataModeller);\n//# sourceMappingURL=DataModeller.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/systems/SceneRendering/DataModeller.js?')},"./lib/systems/SceneRendering/Orchestrator.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _kernox_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../kernox.js */ "./vendor/kernox.js");\n/* harmony import */ var _SpaceSearcher_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SpaceSearcher.js */ "./lib/systems/SceneRendering/SpaceSearcher.js");\n/* harmony import */ var _RayCaster_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RayCaster.js */ "./lib/systems/SceneRendering/RayCaster.js");\n/* harmony import */ var _DataModeller_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DataModeller.js */ "./lib/systems/SceneRendering/DataModeller.js");\n/* harmony import */ var _Renderer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Renderer.js */ "./lib/systems/SceneRendering/Renderer.js");\n/* harmony import */ var _utils_rendering_LocatorGL_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/rendering/LocatorGL.js */ "./lib/utils/rendering/LocatorGL.js");\n/* harmony import */ var _setup_webGL_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../setup/webGL.js */ "./lib/setup/webGL.js");\n/* harmony import */ var _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utils/scene/Camera.js */ "./lib/utils/scene/Camera.js");\n/* harmony import */ var _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../config.js */ "./lib/config.js");\n/* harmony import */ var _setup_canvases_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../setup/canvases.js */ "./lib/setup/canvases.js");\n\n\n\n\n\n\n\n\n\n\n\nconst ctx = _setup_canvases_js__WEBPACK_IMPORTED_MODULE_10__["default"].canvas2d.getContext(\'2d\');\nclass RenderingPipeline extends _kernox_js__WEBPACK_IMPORTED_MODULE_0__.System {\n    init() {\n        this.spaceSearcher = new _SpaceSearcher_js__WEBPACK_IMPORTED_MODULE_1__["default"](this);\n        this.rayCaster = new _RayCaster_js__WEBPACK_IMPORTED_MODULE_2__["default"](this);\n        this.dataModeller = new _DataModeller_js__WEBPACK_IMPORTED_MODULE_3__["default"](this);\n        this.renderer = new _Renderer_js__WEBPACK_IMPORTED_MODULE_4__["default"](this);\n    }\n    __debugRay__(ray) {\n        if (!_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.castCenter)\n            return;\n        const deg = _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.castCenter?.direction.angle() * (180 / Math.PI);\n        ctx.strokeStyle = \'rgba(255,255,255,0.01)\';\n        ctx.lineWidth = 1;\n        let from = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__["default"].rotate(ray.source, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.pos, deg);\n        let to = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__["default"].rotate(ray.collidesAt, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.pos, deg);\n        from = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__["default"].sub(_utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__["default"].sub(from, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.pos), { x: -10, y: -10 }).scale(1.5 * 3);\n        to = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__["default"].sub(_utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__["default"].sub(to, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.pos), { x: -10, y: -10 }).scale(1.5 * 3);\n        ctx.beginPath();\n        ctx.moveTo(from.x, from.y);\n        ctx.lineTo(to.x, to.y);\n        ctx.closePath();\n        ctx.stroke();\n        if (!ray.reflected || !ray.reflected.active)\n            return;\n        this.__debugRay__(ray.reflected);\n    }\n    execute() {\n        if (!this.locator)\n            return false;\n        if (!_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera || !_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.castEdge || !_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.castCenter)\n            return false;\n        const wallIndices = this.spaceSearcher.getIndicesOfClosest(_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera);\n        const ray = _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.castEdge;\n        const rotationAngle = (_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.FOV / _config_js__WEBPACK_IMPORTED_MODULE_9__.rayvenConfig.resolution) * (Math.PI / 180) * -1;\n        const complexRotator = [Math.cos(rotationAngle), Math.sin(rotationAngle)];\n        const direction = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__["default"].copy(ray.direction);\n        this.dataModeller.reset();\n        for (let i = 0; i < _config_js__WEBPACK_IMPORTED_MODULE_9__.rayvenConfig.resolution; i++) {\n            ray.direction.complexRotate(complexRotator);\n            if (ray.reflected)\n                ray.reflected.active = false;\n            this.rayCaster.castRay(ray, Object.assign({}, wallIndices));\n            this.__debugRay__(ray);\n            let angle = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_8__["default"].angleBetween(_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_7__.camera.castCenter.direction, ray.direction);\n            this.dataModeller.model(ray, angle, i);\n        }\n        let amount = this.dataModeller.memoryIndex;\n        this.renderer.render(amount);\n        ray.direction = direction;\n        return true;\n    }\n}\n;\n_setup_webGL_js__WEBPACK_IMPORTED_MODULE_6__.locatorPromise\n    .then((locator) => { if (locator instanceof _utils_rendering_LocatorGL_js__WEBPACK_IMPORTED_MODULE_5__["default"])\n    RenderingPipeline.prototype.locator = locator; })\n    .catch((err) => { throw Error(err); });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RenderingPipeline);\n//# sourceMappingURL=Orchestrator.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/systems/SceneRendering/Orchestrator.js?')},"./lib/systems/SceneRendering/RayCaster.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_physics_CollisionDetector_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/physics/CollisionDetector.js */ "./lib/utils/physics/CollisionDetector.js");\n/* harmony import */ var _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n\n\nclass RayCaster {\n    constructor(sys) {\n        this.sys = sys;\n        this.sys.attachToEvent("__start", (e) => { this.loadGeometry(); });\n    }\n    loadGeometry() {\n        this.horizontalWalls = this.sys.getCollection(\'HorizontalWalls\').asArray();\n        this.verticalWalls = this.sys.getCollection(\'VerticalWalls\').asArray();\n        this.circles = this.sys.getCollection(\'Circles\').asArray();\n    }\n    castRay(ray, indices) {\n        if (ray.reflected)\n            ray.reflected.active = false;\n        ray.collidesWith = null;\n        ray.lambda = Infinity;\n        const wallCollision = this.iterativeWallCollisionTest(ray, indices);\n        const circleCollision = this.testAgainstCircles(ray);\n        if (!wallCollision && !circleCollision)\n            return;\n        if (ray.level < 15 && ray.collidesWith.opacity < 1 && this.reflect(ray)) {\n            this.castRay(ray.reflected, indices);\n        }\n    }\n    reflect(ray) {\n        if (!ray.collidesWith)\n            return false;\n        if (!ray.reflected) {\n            ray.reflected = this.sys.__kernox.entityFactory.create(\'Ray\', {});\n            ray.reflected.level = ray.level + 1;\n        }\n        ray.reflected.source = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].copy(ray.collidesAt);\n        ray.reflected.direction = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].copy(ray.direction);\n        ray.reflected.active = true;\n        const surfaceType = ray.collidesWith.type;\n        const strategy = {\n            HorizontalWall: (reflected) => { reflected.direction.y *= -1; },\n            VerticalWall: (reflected) => { reflected.direction.x *= -1; },\n            Circle: (reflected) => {\n                const circle = ray.collidesWith;\n                const pointToCenter = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].sub(circle.center, ray.collidesAt);\n                const angleBetween = _utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].angleBetween(_utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].scale(ray.direction, -1), pointToCenter);\n                const sense = (ray.direction.x > 0 ? 1 : -1);\n                reflected.direction\n                    .complexRotate([\n                    Math.cos(sense * angleBetween * 2),\n                    Math.sin(sense * angleBetween * 2)\n                ]);\n                reflected.source.add(_utils_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_1__["default"].scale(reflected.direction, 0.01));\n                reflected.direction.scale(-1);\n            }\n        };\n        const reflectStrategy = strategy[surfaceType];\n        if (!reflectStrategy)\n            return false;\n        reflectStrategy(ray.reflected);\n        return true;\n    }\n    iterativeWallCollisionTest(ray, indices) {\n        const sense = {\n            x: ray.direction.x > 0 ? 1 : -1,\n            y: ray.direction.y > 0 ? 1 : -1\n        };\n        var wallH, wallV, lambdaH, lambdaV, collision;\n        while ((indices.horizontal < this.horizontalWalls.length && sense.y == 1) || (indices.horizontal >= 0 && sense.y == -1) ||\n            (indices.vertical < this.verticalWalls.length && sense.x == 1) || (indices.vertical >= 0 && sense.x == -1)) {\n            wallH = this.horizontalWalls[indices.horizontal + (sense.y == 1 ? 1 : 0)];\n            wallV = this.verticalWalls[indices.vertical + (sense.x == 1 ? 1 : 0)];\n            lambdaH = wallH ? _utils_physics_CollisionDetector_js__WEBPACK_IMPORTED_MODULE_0__["default"].RayVsHorizontalLine(ray, wallH.posY) : Infinity;\n            lambdaV = wallV ? _utils_physics_CollisionDetector_js__WEBPACK_IMPORTED_MODULE_0__["default"].RayVsVerticalLine(ray, wallV.posX) : Infinity;\n            if (lambdaV === lambdaH)\n                break;\n            if (lambdaH < lambdaV) {\n                collision = _utils_physics_CollisionDetector_js__WEBPACK_IMPORTED_MODULE_0__["default"].RayVsHorizontalWall(ray, wallH);\n            }\n            else {\n                collision = _utils_physics_CollisionDetector_js__WEBPACK_IMPORTED_MODULE_0__["default"].RayVsVerticalWall(ray, wallV);\n            }\n            if (collision) {\n                ray.collidesAt = collision;\n                ray.lambda = Math.min(lambdaH, lambdaV);\n                ray.collidesWith = (lambdaH <= lambdaV) ? wallH : wallV;\n                break;\n            }\n            indices.horizontal += (lambdaH <= lambdaV) ? sense.y : 0;\n            indices.vertical += (lambdaH >= lambdaV) ? sense.x : 0;\n        }\n        ;\n        return collision ? true : false;\n    }\n    testAgainstCircles(ray) {\n        var collided = false, collision;\n        for (let i = 0; i < this.circles.length; i++) {\n            collision = _utils_physics_CollisionDetector_js__WEBPACK_IMPORTED_MODULE_0__["default"].RayVsCircle(ray, this.circles[i]);\n            if (!collision)\n                continue;\n            if (ray.lambda <= collision.lambda)\n                continue;\n            collided = true;\n            ray.collidesAt = collision.point;\n            ray.lambda = collision.lambda;\n            ray.collidesWith = this.circles[i];\n        }\n        return collided;\n    }\n}\n;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RayCaster);\n//# sourceMappingURL=RayCaster.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/systems/SceneRendering/RayCaster.js?')},"./lib/systems/SceneRendering/Renderer.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../setup/webGL.js */ "./lib/setup/webGL.js");\n/* harmony import */ var _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/scene/Camera.js */ "./lib/utils/scene/Camera.js");\n/* harmony import */ var _setup_canvases_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../setup/canvases.js */ "./lib/setup/canvases.js");\n\n\n\nconst ctx = _setup_canvases_js__WEBPACK_IMPORTED_MODULE_2__["default"].canvas3d;\nclass Renderer {\n    constructor(sys) {\n        this.sys = sys;\n        this.initialized = false;\n    }\n    init() {\n        const locator = this.sys.locator;\n        this.frontBuffer = locator.getBuffer("ARRAY_BUFFER", "frontBuffer");\n        this.frontElementBuffer = locator.getBuffer("ELEMENT_ARRAY_BUFFER", "frontBuffer");\n        this.lyingBuffer = locator.getBuffer("ARRAY_BUFFER", "lyingBuffer");\n        this.lyingElementBuffer = locator.getBuffer("ELEMENT_ARRAY_BUFFER", "lyingBuffer");\n        this.frontProgram = locator.getProgram(\'front\');\n        this.lyingProgram = locator.getProgram(\'lying\');\n        this.initialized = true;\n    }\n    render(amount) {\n        amount++;\n        if (!_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera || !_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castCenter || !_utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castEdge)\n            return;\n        if (!this.initialized)\n            this.init();\n        const a_color = _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.getAttribLocation(this.frontProgram, \'a_color\');\n        const a_position = _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.getAttribLocation(this.frontProgram, \'a_position\');\n        const a_height = _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.getAttribLocation(this.frontProgram, \'a_height\');\n        const a_texCoord = _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.getAttribLocation(this.frontProgram, \'a_texCoord\');\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.clear(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.COLOR_BUFFER_BIT | _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.DEPTH_BUFFER_BIT);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.useProgram(this.lyingProgram);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.bindBuffer(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.ARRAY_BUFFER, this.lyingBuffer);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.bindBuffer(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.ELEMENT_ARRAY_BUFFER, this.lyingElementBuffer);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.disableVertexAttribArray(a_color);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.enableVertexAttribArray(a_position);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.vertexAttribPointer(a_position, 3, _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.FLOAT, false, 4 * Float32Array.BYTES_PER_ELEMENT, 0);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.enableVertexAttribArray(a_height);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.vertexAttribPointer(a_height, 1, _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.FLOAT, false, 4 * Float32Array.BYTES_PER_ELEMENT, 3 * Float32Array.BYTES_PER_ELEMENT);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.uniform2f(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.getUniformLocation(this.lyingProgram, \'u_resolution\'), ctx.width, ctx.height);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.uniform1f(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.getUniformLocation(this.lyingProgram, \'u_time\'), this.sys.__kernox.frame / 10);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.uniform3f(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.getUniformLocation(this.lyingProgram, \'u_cameraPosition\'), _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.pos.x, 0, _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.pos.y);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.uniform1f(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.getUniformLocation(this.lyingProgram, \'u_cameraAngle\'), _utils_scene_Camera_js__WEBPACK_IMPORTED_MODULE_1__.camera.castCenter.direction.angle());\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.drawElements(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.TRIANGLES, 3 * amount * 4, _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.UNSIGNED_SHORT, 3 * 0 * Uint16Array.BYTES_PER_ELEMENT);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.disableVertexAttribArray(a_height);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.useProgram(this.frontProgram);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.bindBuffer(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.ARRAY_BUFFER, this.frontBuffer);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.bindBuffer(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.ELEMENT_ARRAY_BUFFER, this.frontElementBuffer);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.vertexAttribPointer(a_position, 3, _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.FLOAT, false, 9 * Float32Array.BYTES_PER_ELEMENT, 0);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.enableVertexAttribArray(a_color);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.vertexAttribPointer(a_color, 4, _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.FLOAT, false, 9 * Float32Array.BYTES_PER_ELEMENT, 3 * Float32Array.BYTES_PER_ELEMENT);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.enableVertexAttribArray(a_texCoord);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.vertexAttribPointer(a_texCoord, 2, _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.FLOAT, false, 9 * Float32Array.BYTES_PER_ELEMENT, 7 * Float32Array.BYTES_PER_ELEMENT);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.uniform2f(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.getUniformLocation(this.frontProgram, \'u_resolution\'), ctx.width, ctx.height);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.drawElements(_setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.TRIANGLES, 3 * amount * 2, _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.UNSIGNED_SHORT, 3 * 0 * Uint16Array.BYTES_PER_ELEMENT);\n        _setup_webGL_js__WEBPACK_IMPORTED_MODULE_0__.gl.disableVertexAttribArray(a_texCoord);\n    }\n    ;\n}\n;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Renderer);\n//# sourceMappingURL=Renderer.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/systems/SceneRendering/Renderer.js?')},"./lib/systems/SceneRendering/SpaceSearcher.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass SpaceSearcher {\n    constructor(sys) {\n        this.sys = sys;\n        this.sys.attachToEvent(\"__start\", (e) => { this.loadGeometry(); });\n    }\n    loadGeometry() {\n        this.verticalWalls = this.sys.getCollection('VerticalWalls').asArray();\n        this.horizontalWalls = this.sys.getCollection('HorizontalWalls').asArray();\n    }\n    execute() { }\n    getIndicesOfClosest(camera) {\n        const wallIndices = { horizontal: -1, vertical: -1 };\n        if (this.verticalWalls.length > 0) {\n            let xPositions = this.verticalWalls.map((wall) => wall.posX);\n            wallIndices.vertical = this.BinarySearchForClosest(xPositions, camera.pos.x);\n        }\n        if (this.horizontalWalls.length > 0) {\n            let yPositions = this.horizontalWalls.map((wall) => wall.posY);\n            wallIndices.horizontal = this.BinarySearchForClosest(yPositions, camera.pos.y);\n        }\n        return wallIndices;\n    }\n    BinarySearchForClosest(arr, value) {\n        if (arr.length <= 0)\n            return -1;\n        let leftIndex = 0;\n        let rightIndex = arr.length - 1;\n        let inBetweenIndex = Math.ceil((leftIndex + rightIndex) / 2);\n        let index = inBetweenIndex;\n        let exec = 0;\n        while (leftIndex < rightIndex && exec < 100) {\n            exec++;\n            if (rightIndex == inBetweenIndex) {\n                index = rightIndex;\n                break;\n            }\n            if (arr[inBetweenIndex] < value) {\n                leftIndex = inBetweenIndex;\n            }\n            else if (arr[inBetweenIndex] > value) {\n                rightIndex = inBetweenIndex;\n                index = rightIndex;\n            }\n            else if (arr[inBetweenIndex] == value) {\n                index = inBetweenIndex;\n                break;\n            }\n            ;\n            inBetweenIndex = Math.ceil((leftIndex + rightIndex) / 2);\n        }\n        while (arr[index] >= value)\n            index--;\n        if (exec >= 100)\n            throw Error('Binary Search went out of control');\n        return index;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SpaceSearcher);\n//# sourceMappingURL=SpaceSearcher.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/systems/SceneRendering/SpaceSearcher.js?")},"./lib/utils/physics/CollisionDetector.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n\nclass CollisionDetector {\n    static RayVsVerticalLine(ray, x) {\n        const lambda = (x - ray.source.x) / ray.direction.x;\n        return lambda > 0 ? lambda : false;\n    }\n    static RayVsVerticalWall(ray, wall) {\n        const lambda = CollisionDetector.RayVsVerticalLine(ray, wall.posX);\n        if (!lambda)\n            return false;\n        const point = _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].add(ray.source, _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].scale(ray.direction, lambda));\n        return (point.y >= wall.startY && point.y <= wall.endY) ? point : false;\n    }\n    static RayVsHorizontalLine(ray, y) {\n        const lambda = (y - ray.source.y) / ray.direction.y;\n        return lambda > 0 ? lambda : false;\n    }\n    static RayVsHorizontalWall(ray, wall) {\n        const lambda = CollisionDetector.RayVsHorizontalLine(ray, wall.posY);\n        if (!lambda)\n            return false;\n        const point = _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].add(ray.source, _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].scale(ray.direction, lambda));\n        return (point.x >= wall.startX && point.x <= wall.endX) ? point : false;\n    }\n    static RayVsCircle(ray, circle) {\n        if (circle.radius <= 0)\n            throw Error("Invalid circle radius: it must be a positive number");\n        let rayOrigin = ray.source;\n        let OC = _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].sub(circle.center, rayOrigin);\n        let rayDirection = _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].normalize(ray.direction);\n        let OAmag = _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].dot(rayDirection, OC);\n        let CAmagSq = OC.magSq() - OAmag * OAmag;\n        let BAmag = Math.sqrt(circle.radius * circle.radius - CAmagSq);\n        let lambda = OAmag - BAmag;\n        if (!lambda || lambda <= 0)\n            return false;\n        let RayToCircle = rayDirection.scale(lambda);\n        let point = _Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].add(rayOrigin, RayToCircle);\n        return { point, lambda };\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CollisionDetector);\n//# sourceMappingURL=CollisionDetector.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/utils/physics/CollisionDetector.js?')},"./lib/utils/physics/Vector2D.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass Vector2D {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    }\n    static copy(v) {\n        return new Vector2D(v.x, v.y);\n    }\n    add(v) {\n        this.x += v.x;\n        this.y += v.y;\n        return this;\n    }\n    static add(v1, v2) {\n        return new Vector2D(v1.x + v2.x, v1.y + v2.y);\n    }\n    sub(v) {\n        this.x -= v.x;\n        this.y -= v.y;\n        return this;\n    }\n    static sub(v1, v2) {\n        return new Vector2D(v1.x - v2.x, v1.y - v2.y);\n    }\n    div(v) {\n        this.x /= v.x;\n        this.y /= v.y;\n        return this;\n    }\n    static div(v1, v2) {\n        return new Vector2D(v1.x / v2.x, v1.y / v2.y);\n    }\n    mult(v) {\n        this.x *= v.x;\n        this.y *= v.y;\n        return this;\n    }\n    static mult(v1, v2) {\n        return new Vector2D(v1.x * v2.x, v1.y * v2.y);\n    }\n    abs() {\n        this.x = Math.abs(this.x);\n        this.y = Math.abs(this.y);\n        return this;\n    }\n    static abs(v) {\n        return new Vector2D(Math.abs(v.x), Math.abs(v.y));\n    }\n    dot(v) {\n        return (this.x * v.x) + (this.y * v.y);\n    }\n    static dot(v1, v2) {\n        return (v1.x * v2.x) + (v1.y * v2.y);\n    }\n    magSq() {\n        return (this.x * this.x) + (this.y * this.y);\n    }\n    static magSq(v) {\n        return (v.x * v.x) + (v.y * v.y);\n    }\n    mag() {\n        return Math.sqrt(this.magSq());\n    }\n    static mag(v) {\n        return Math.sqrt(Vector2D.magSq(v));\n    }\n    scale(s) {\n        this.x *= s;\n        this.y *= s;\n        return this;\n    }\n    static scale(v, s) {\n        return new Vector2D(v.x * s, v.y * s);\n    }\n    normalize() {\n        let mag = this.mag();\n        this.x /= mag;\n        this.y /= mag;\n        return this;\n    }\n    angle() {\n        let angle = Math.atan2(this.y, this.x);\n        if (angle < 0) {\n            angle += 2 * Math.PI;\n        }\n        return angle;\n    }\n    static rotate(v, center, deg) {\n        deg *= Math.PI / 180;\n        v = Vector2D.sub(v, center);\n        return Vector2D.add({\n            x: v.dot({ x: Math.cos(deg), y: -Math.sin(deg) }),\n            y: v.dot({ x: Math.sin(deg), y: Math.cos(deg) })\n        }, center);\n    }\n    complexRotate(w) {\n        const temp = this.x;\n        this.x = this.x * w[0] - this.y * w[1];\n        this.y = temp * w[1] + this.y * w[0];\n        return this;\n    }\n    static complexRotate(v, w) {\n        return new Vector2D(v.x * w[0] - v.y * w[1], v.x * w[1] + v.y * w[0]);\n    }\n    ;\n    static normalize(v) {\n        let mag = Vector2D.mag(v);\n        return new Vector2D(v.x / mag, v.y / mag);\n    }\n    static between(v1, v2, percentil) {\n        return new Vector2D(v1.x + (v2.x - v1.x) * percentil, v1.y + (v2.y - v1.y) * percentil);\n    }\n    static perpendicular(v) {\n        return new Vector2D(-1 * v.y, -1 * v.x);\n    }\n    static angleBetween(v1, v2) {\n        let normalizedDotProduct = Vector2D.dot(v1, v2) / (v1.mag() * v2.mag());\n        return Math.acos(Math.min(normalizedDotProduct, 1));\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Vector2D);\n//# sourceMappingURL=Vector2D.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/utils/physics/Vector2D.js?')},"./lib/utils/rendering/BuilderGL.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass BuilderGL {\n    static async loadShaderSource(url) {\n        console.info('Loading shader source', url);\n        const res = await fetch(url);\n        return res.text();\n    }\n    static async buildShader(gl, type, url) {\n        if (!(gl instanceof WebGL2RenderingContext))\n            throw Error(\"The 'gl' parameter must be an instance of 'WebGL2RenderingContext'\");\n        const shaderTypes = {\n            \"FRAGMENT_SHADER\": gl.FRAGMENT_SHADER,\n            \"VERTEX_SHADER\": gl.VERTEX_SHADER\n        };\n        const _type = shaderTypes[type];\n        if (_type === undefined)\n            throw Error(`Invalid shader type '${type}'; the type must be either  FRAGMENT_SHADER or VERTEX_SHADER`);\n        if (typeof url !== 'string' || url == \"\")\n            throw Error(\"Invalid 'url' argument: it must be a non-empty string\");\n        const source = await this.loadShaderSource(url);\n        const shader = gl.createShader(_type);\n        if (!source || !shader)\n            return;\n        gl.shaderSource(shader, source);\n        gl.compileShader(shader);\n        const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n        if (success)\n            return shader;\n    }\n    ;\n    static buildProgram(gl, vertexShader, fragmentShader) {\n        if (!(gl instanceof WebGL2RenderingContext))\n            throw Error(\"The 'gl' parameter must be an instance of 'WebGL2RenderingContext'\");\n        if (!(vertexShader instanceof WebGLShader))\n            throw Error(\"Invalid vertex shader: it must be an instance of 'WebGLShader'\");\n        if (!(fragmentShader instanceof WebGLShader))\n            throw Error(\"Invalid fragment shader: it must be an instance of 'WebGLShader'\");\n        var program;\n        program = gl.createProgram();\n        gl.attachShader(program, vertexShader);\n        gl.attachShader(program, fragmentShader);\n        gl.linkProgram(program);\n        const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n        if (success)\n            return program;\n        gl.deleteProgram(program);\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BuilderGL);\n//# sourceMappingURL=BuilderGL.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/utils/rendering/BuilderGL.js?")},"./lib/utils/rendering/CanvasManager.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass CanvasManager {\n    constructor() {\n        this.canvases = new Map();\n    }\n    createCanvas(details) {\n        const canvasContainer = document.querySelector('.canvasContainer');\n        const canvas = document.createElement('canvas');\n        if (document.getElementById(details.id) !== null || this.canvases.get(details.id) !== undefined) {\n            console.warn(`Violation: unexpectedly, an element already exists having the id '${details.id}' the canvas is supposed to adquire`);\n        }\n        canvas.id = details.id;\n        canvas.width = details.width;\n        canvas.height = details.height;\n        canvas.style.position = 'absolute';\n        if (details.style === null)\n            return canvas;\n        for (let property in details.style) {\n            canvas.style[property] = details.style[property];\n        }\n        if (canvasContainer === null) {\n            document.body.appendChild(canvas);\n            console.warn(\"You must define a <div> container with the id 'canvasContainer'; the canvas will be allocated at the root element '<body>' because the container was not defined \");\n        }\n        else\n            canvasContainer.appendChild(canvas);\n        this.canvases.set(canvas.id, canvas);\n        return canvas;\n    }\n    deleteCanvas(canvas) {\n        const canvasID = canvas.id;\n        this.canvases.delete(canvasID);\n        const canvasContainer = document.querySelector('.canvasContainer');\n        if (canvasContainer === null)\n            return;\n        canvasContainer.removeChild(canvas);\n    }\n    getCanvas(canvasID) {\n        const canvas = this.canvases.get(canvasID);\n        return canvas !== undefined ? canvas : false;\n    }\n}\nconst instance = new CanvasManager();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (instance);\n//# sourceMappingURL=CanvasManager.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/utils/rendering/CanvasManager.js?")},"./lib/utils/rendering/ImageLoader.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");\n    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");\n    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _ImageLoader_textures;\nclass ImageLoader {\n    constructor() {\n        _ImageLoader_textures.set(this, new Map());\n    }\n    load(name, src) {\n        if (typeof name !== \'string\' || !name) {\n            throw Error(`Invalid texture name given, it must be a non-empty string`);\n        }\n        if (__classPrivateFieldGet(this, _ImageLoader_textures, "f").get(name))\n            throw Error(`Cannot add texture with name \'${name}\'; the name has already been registered`);\n        try {\n            const image = new Image();\n            image.src = \'./assets/textures/\' + src;\n            __classPrivateFieldGet(this, _ImageLoader_textures, "f").set(name, image);\n        }\n        catch (err) {\n            throw Error(`The image with source \'/img/textures/${src}\' could not be found`);\n        }\n        return true;\n    }\n    remove(name) {\n        return __classPrivateFieldGet(this, _ImageLoader_textures, "f").delete(name);\n    }\n    get(name) {\n        const texture = __classPrivateFieldGet(this, _ImageLoader_textures, "f").get(name);\n        return texture ? texture : false;\n    }\n}\n_ImageLoader_textures = new WeakMap();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ImageLoader);\n//# sourceMappingURL=ImageLoader.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/utils/rendering/ImageLoader.js?')},"./lib/utils/rendering/LocatorGL.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass LocatorGL {\n    constructor() {\n        this.arrayBuffers = new Map();\n        this.elementArrayBuffers = new Map();\n        this.programs = new Map();\n    }\n    __mapTypeToBufferLocation__(type) {\n        const types = {\n            "ARRAY_BUFFER": this.arrayBuffers,\n            "ELEMENT_ARRAY_BUFFER": this.elementArrayBuffers\n        };\n        const location = types[type];\n        if (!location)\n            throw Error("Could not get buffer location: invalid buffer type");\n        return location;\n    }\n    registerBuffer(buffer, type, name) {\n        if (!(buffer instanceof WebGLBuffer))\n            throw Error("Invalid buffer: it must be an instance of \'WebGLBuffer\'");\n        const location = this.__mapTypeToBufferLocation__(type);\n        if (!location)\n            return;\n        if (typeof name !== "string" || !name)\n            throw Error("Invalid name: it must be a  non-empty string");\n        const exists = location.get(name);\n        if (exists)\n            throw Error(`Could not register buffer \'${name}\' as a buffer of type \'${type}\' because it already exists`);\n        location.set(name, buffer);\n        return true;\n    }\n    registerProgram(name, program) {\n        if (typeof name !== "string" || !name)\n            throw Error("Invalid name: it must be a  non-empty string");\n        if (!(program instanceof WebGLProgram))\n            throw Error("Invalid program: it must be an instance of \'WebGLProgram\'");\n        if (this.programs.get(name))\n            throw Error(`Could not register program \'${name}\' because it already exists`);\n        this.programs.set(name, program);\n        return true;\n    }\n    getBuffer(type, name) {\n        const location = this.__mapTypeToBufferLocation__(type);\n        if (!location)\n            return false;\n        const buffer = location.get(name);\n        return buffer ? buffer : false;\n    }\n    ;\n    getProgram(name) {\n        const program = this.programs.get(name);\n        if (!program)\n            return false;\n        return program;\n    }\n    ;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (LocatorGL);\n//# sourceMappingURL=LocatorGL.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/utils/rendering/LocatorGL.js?')},"./lib/utils/scene/Camera.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Camera: () => (/* binding */ Camera),\n/* harmony export */   camera: () => (/* binding */ camera)\n/* harmony export */ });\n/* harmony import */ var _physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../physics/Vector2D.js */ "./lib/utils/physics/Vector2D.js");\n\nclass Camera {\n    constructor() {\n        this.initialized = false;\n        this.wallIndices = { horizontal: NaN, vertical: NaN };\n        this.FOV = NaN;\n        this.pos = new _physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](NaN, NaN);\n    }\n    ;\n    init(app, info) {\n        var { x, y, fov, dx, dy } = info;\n        this.FOV = fov;\n        this.pos = new _physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](x, y);\n        if (this.initialized) {\n            console.warn("Attempted to initialize an already initialized instance of \'Camera\'");\n            return false;\n        }\n        camera.castCenter = app.entityFactory.create(\'Ray\', {\n            source: camera.pos,\n            direction: _physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].normalize(new _physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](dx, dy))\n        });\n        camera.castEdge = app.entityFactory.create(\'Ray\', {\n            source: camera.pos,\n            direction: _physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].complexRotate(_physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"].normalize(new _physics_Vector2D_js__WEBPACK_IMPORTED_MODULE_0__["default"](dx, dy)), [Math.cos(camera.FOV * Math.PI / 360), Math.sin(camera.FOV * Math.PI / 360)])\n        });\n        return this.initialized = true;\n    }\n}\n;\nconst camera = new Camera();\n\n//# sourceMappingURL=Camera.js.map\n\n//# sourceURL=webpack://typescript-practice/./lib/utils/scene/Camera.js?')},"./vendor/kernox.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArrayList: () => (/* binding */ d),\n/* harmony export */   Kernox: () => (/* binding */ p),\n/* harmony export */   System: () => (/* binding */ m)\n/* harmony export */ });\nvar e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{mx:()=>_,wE:()=>u,iQ:()=>h});class s{constructor(e){this.__kernox=e,this.__namespaces=new Set}use(e){const{name:t}=e;if(this.namespaces.has(t))throw new Error(`Conflict with already existing namespace \'${t}\', please consider renaming one of them.`);e.collections&&this.registerCollections(e.collections,t),e.prototypes&&this.registerPrototypes(e.prototypes,t),e.systems&&this.registerSystems(e.systems,t),this.namespaces.add(t)}get namespaces(){return this.__namespaces}registerPrototypes(e,t){e.forEach((e=>{this.__kernox.entityFactory.prototype(e,t)}))}registerCollections(e,t){e.forEach((e=>{this.__kernox.collectionManager.use(e,t)}))}registerSystems(e,t){e.forEach((e=>{this.__kernox.systemManager.use(e,t)}))}}class i{}function r(e,t){let s=e.prototype;for(;s;)if(s=Object.getPrototypeOf(s),s===t.prototype)return!0;return!1}class n{constructor(e){this.__kernox=e,this.collections=new Map,this.toRemove=new Set}get(e){const t=this.collections.get(e)||this.resolveImplicitNamespace(e);if(!t)throw new Error(`Collection \'${e}\' is not registered.`);return t}use(e,t=""){if(!r(e,i))throw new Error("Invalid collection: it must be a sub-class of AbstractCollection");const s=t?`${t}.${e.name}`:e.name;if(this.collections.has(s))throw new Error(`Cannot register collection \'${s}\' because it already exists`);const n=new e;this.collections.set(s,n)}addEntityTo(e,t){this.get(t).insert(e),e.linkTo(t)}removeEntityFrom(e,t){this.get(t).remove(e),e.unlinkFrom(t)}remindToForget(e){this.toRemove.add(e)}flushRemoved(){for(const e of this.toRemove)for(const t of e.collections())this.removeEntityFrom(e,t);this.toRemove.clear()}resolveImplicitNamespace(e){const t=this.__kernox.addonLoader.namespaces;var s,i;for(const r of t)if((i=this.collections.get(`${r}.${e}`))&&!s)s=i;else if(i)throw new Error(`Ambiguous collection \'${e}\' was requested: a namespace must be specified before it ( Ex. namespace.collectionName ).`);return s}}class o{constructor(e,t){this.__ID=e,this.__TYPE=t,this.__children={},this.__collections=new Set,this.__modified=!1}get id(){return this.__ID}get type(){return this.__TYPE}belongsTo(e){return this.__collections.has(e)}collections(){return this.__collections}linkTo(e){this.__collections.add(e)}unlinkFrom(e){this.__collections.delete(e)}appendChild(e,t){if(this.__children[e])throw Error(`Child already exists with name \'${e}\' at entity \'${this.__ID}\'`);this.__children[e]=t}getChild(e){return this.__children[e]}deleteChild(e){delete this.__children[e]}}class a{constructor(e){this.__kernox=e,this.types=new Map,this.pools=new Map,this.nextID=0}prototype(e,t=""){const s=t?`${t}.${e.name}`:e.name;if(this.types.has(s))throw Error(`The type named \'${s}\' has already been registered`);const{inherits:i}=e;if(i){const t=i,s=[];for(const e of t)s.push(e);let r=s.pop();for(;r;){const t={};this.deepAssign(t,r.attributes),this.deepAssign(t,e.attributes),e.attributes=t,e.collections=new Set([...e.collections||[],...r.collections||[]]);for(const e of r.inherits||[])s.push(e);r=s.pop()}}this.types.set(s,e)}create(e,t={}){const s=this.types.get(e)||this.resolveImplicitNamespace(e);if(!s)throw Error(`Cannot create entity of null type \'${e}\'`);const i=new o(""+this.nextID++,e);this.deepAssign(i,s.attributes);for(const e of Object.keys(t))e in i&&!e.includes("_")&&(i[e]=t[e]);const r=e.split("."),n=2==r.length?r[0]:void 0;for(let e of s.collections||[])n&&(e=`${n}.${e}`),this.__kernox.collectionManager.addEntityTo(i,e),i.linkTo(e);return i}copyFromPrototype(e,t){this.deepAssign(e,t.attributes)}sendToRest(e){}resolveImplicitNamespace(e){const t=this.__kernox.addonLoader.namespaces;var s,i;for(const r of t)if((i=this.types.get(`${r}.${e}`))&&!s)s=i;else if(i)throw new Error(`Ambiguous entity type \'${e}\' was requested: a namespace must be specified before it ( Ex. namespace.type ).`);return s}deepAssign(e,t,s=new WeakMap){if(!s.has(t)){s.set(t,e);for(const i of Object.keys(t)){const r=t[i];null===r||"object"!=typeof r?e[i]=r:Array.isArray(r)?(e[i]=[],this.deepAssign(e[i],r,s)):r.constructor!==Object?(e[i]=new r.constructor,this.deepAssign(e[i],r,s)):(e[i]={},this.deepAssign(e[i],r,s))}}}}class c{constructor(e){this.__kernox=e,this.listeners=new Map}dispatch(e,t){const s=this.listeners[e]||this.resolveImplicitNamespace(e);if(!s)return!1;for(const e of s)e(t);return!0}attachToEvent(e,t){if(!e||"string"!=typeof e)throw new Error("[EventManager] invalid event name provided: it must be a non-empty string");if("function"!=typeof t)throw new Error("Expected function as \'handler\'");return this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t)}resolveImplicitNamespace(e){const t=this.__kernox.addonLoader.namespaces;var s,i;for(const r of t)if((i=this.listeners[`${r}.${e}`])&&!s)s=i;else if(i)throw new Error(`Ambiguous event \'${e}\' was requested: a namespace must be specified before it ( Ex. namespace.eventName ).`);return s}}class h{constructor(e,t){this.__kernox=e,this.__context=t,this.__paused=!1}init(){}execute(){}get context(){return this.__context}get paused(){return this.__paused}set paused(e){this.__paused=e}attachToEvent(e,t){const s=this.resolveResourceName(e);return this.__kernox.eventBroker.attachToEvent(s,t)}dispatchEvent(e,t){this.__kernox.eventBroker.dispatch(e,t)}getCollection(e){const t=this.resolveResourceName(e),s=this.__kernox.collectionManager.get(t);if(!s)throw Error(`Collection \'${t}\' was not found`);return s}resolveResourceName(e){const t=e.split(".");var s=this.context,i=e;2==t.length&&([s,i]=t);return s?`${s}.${i}`:e}}class l{constructor(e){this.__kernox=e,this.systems=new Map,this.executionList=[]}execute(){this.executionList.forEach((e=>{e.paused||e.execute()}))}use(e,t=""){const s=t?`${t}.${e.name}`:e.name;if(!r(e,h))throw new Error("Expected instance of \'System\'");if(this.systems.has(s))return console.warn(`System \'${s}\' is already registered`),!1;const i=new e(this.__kernox,t);return i.init(),this.systems.set(s,i),this.executionList.push(i),!0}unuse(e){const t=this.systems.get(e);t&&(this.systems.delete(e),this.executionList=this.executionList.filter((e=>e!==t)))}get(e){return this.systems.get(e)}}class _ extends i{constructor(){super(...arguments),this.entities=[],this.ids=new Set,this.__changed=!1}insert(e){return!this.has(e)&&(this.entities.push(e),e.linkTo(this.constructor.name),this.__changed=!0,!0)}remove(e){const t=this.entities.indexOf(e);return-1!=t&&(console.log(t),this.ids.delete(e.id),this.entities.splice(t,1),e.unlinkFrom(this.constructor.name),this.__changed=!0,!0)}has(e){return-1!=this.entities.indexOf(e)}*[Symbol.iterator](){yield*this.entities}sort(e){this.entities.sort(e)}filter(e){return this.entities.filter(e)}asArray(){return Array.from(this.entities)}get(e){return this.entities[e]}size(){return this.entities.length}get changed(){return this.__changed}}class u{constructor(){this.__entityFactory=new a(this),this.__collectionManager=new n(this),this.__systemManager=new l(this),this.__eventBroker=new c(this),this.__addonLoader=new s(this),this.__paused=!1,this.__started=!1,this.__frame=0,this.__lastTime=0,this.__dt=1,this.__fps=0}execute(e=30){try{if(this.__started||(this.__started=!0,this.__eventBroker.dispatch("__start")),this.paused)return;this.__dt=e-this.__lastTime,this.__fps=1e3/this.dt,this.__lastTime=e,requestAnimationFrame((e=>this.execute(e))),this.__systemManager.execute(),this.__frame++}catch(e){console.error(e),console.warn("A run-time error has occurred, execution was paused"),this.__paused=!0}}use(e){this.__addonLoader.use(e)}get entityFactory(){return this.__entityFactory}get collectionManager(){return this.__collectionManager}get systemManager(){return this.__systemManager}get eventBroker(){return this.__eventBroker}get addonLoader(){return this.__addonLoader}get started(){return this.__started}get frame(){return this.__frame}get paused(){return this.__paused}get dt(){return this.__dt}get fps(){return this.__fps}}var d=t.mx,p=t.wE,m=t.iQ;\n\n//# sourceURL=webpack://typescript-practice/./vendor/kernox.js?')}},__webpack_module_cache__={};function __webpack_require__(e){var _=__webpack_module_cache__[e];if(void 0!==_)return _.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.d=(e,_)=>{for(var t in _)__webpack_require__.o(_,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:_[t]})},__webpack_require__.o=(e,_)=>Object.prototype.hasOwnProperty.call(e,_),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./lib/rayven.js");